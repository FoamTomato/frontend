<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>åˆæ¢xxljob</title>
    <url>/2022/02/13/%E5%88%9D%E6%8E%A2xxljob/</url>
    <content><![CDATA[<p><a href="http://gitee.com/xuxueli0323/xxl-job/releases">ä¸‹è½½åœ°å€</a></p>
<p>æ­å»ºxxljobéœ€è¦æå‰å‡†å¤‡å¥½</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">maven3+</span><br><span class="line">jdk8+</span><br><span class="line">mysql5.7+</span><br></pre></td></tr></table></figure>

<h3 id="1-é¦–å…ˆåˆå§‹åŒ–SQLè„šæœ¬å»ºç«‹å¿…é¡»çš„åº“å’Œè¡¨"><a href="#1-é¦–å…ˆåˆå§‹åŒ–SQLè„šæœ¬å»ºç«‹å¿…é¡»çš„åº“å’Œè¡¨" class="headerlink" title="1.é¦–å…ˆåˆå§‹åŒ–SQLè„šæœ¬å»ºç«‹å¿…é¡»çš„åº“å’Œè¡¨"></a>1.é¦–å…ˆåˆå§‹åŒ–SQLè„šæœ¬å»ºç«‹å¿…é¡»çš„åº“å’Œè¡¨</h3><p><img src="https://img-blog.csdnimg.cn/41e36ffb828147959d17e4668e4fcde1.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="2-å¯¹äºè§£å‹çš„æ–‡ä»¶åˆ†ä¸ºä¸‰ä¸ªæ¨¡å—"><a href="#2-å¯¹äºè§£å‹çš„æ–‡ä»¶åˆ†ä¸ºä¸‰ä¸ªæ¨¡å—" class="headerlink" title="2.å¯¹äºè§£å‹çš„æ–‡ä»¶åˆ†ä¸ºä¸‰ä¸ªæ¨¡å—"></a>2.å¯¹äºè§£å‹çš„æ–‡ä»¶åˆ†ä¸ºä¸‰ä¸ªæ¨¡å—</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xxl-job-adminï¼šè°ƒåº¦ä¸­å¿ƒ</span><br><span class="line">xxl-job-coreï¼šå…¬å…±ä¾èµ–</span><br><span class="line">xxl-job-executor-samplesï¼šæ‰§è¡Œå™¨Sampleç¤ºä¾‹ï¼ˆé€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬æ‰§è¡Œå™¨ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å‚è€ƒå…¶å¹¶å°†ç°æœ‰é¡¹ç›®æ”¹é€ æˆæ‰§è¡Œå™¨ï¼‰</span><br><span class="line">    ï¼šxxl-job-executor-sample-springbootï¼šSpringbootç‰ˆæœ¬ï¼Œé€šè¿‡Springbootç®¡ç†æ‰§è¡Œå™¨ï¼Œæ¨èè¿™ç§æ–¹å¼ï¼›</span><br><span class="line">    ï¼šxxl-job-executor-sample-framelessï¼šæ— æ¡†æ¶ç‰ˆæœ¬ï¼›</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ï¼šxxl-job-coreæ˜¯éœ€è¦å¼•å…¥çš„æºç åŒ…åç»­æˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹å½¢å¼å¼•å…¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xuxueli<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>xxl-job-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>xxl-job-adminæ˜¯æˆ‘ä»¬çš„è°ƒåº¦ä¸­å¿ƒï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠè¿™ä¸ªé¡¹ç›®å•ç‹¬æ‹¿å‡ºæ¥è¿è¡Œå°±è¡Œäº†ï¼Œä¸‹é¢æ˜¯è¿è¡Œç»“æœ</p>
<p><img src="https://img-blog.csdnimg.cn/aa9e342bd215486daaa05d8783dd5f35.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBARm9hbeeVquiMhA==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>xxl-job-executor-sample-springbootæ˜¯æˆ‘ä»¬åç»­ç”¨bootå¯ä»¥å‚ç…§çš„æ¨¡æ¿ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ç”¨æ¥ä½¿ç”¨</p>
<h3 id="3-xxl-job-adminé…ç½®"><a href="#3-xxl-job-adminé…ç½®" class="headerlink" title="3.xxl-job-adminé…ç½®"></a>3.xxl-job-adminé…ç½®</h3><p>å…ˆä¿®æ”¹æ•°æ®åº“çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢åˆå§‹åŒ–çš„åœ°å€</p>
<p><label style="color:#843900">æ³¨æ„åœ¨æ•°æ®åº“åœ°å€å“ªé‡ŒåŠ ä¸Šæ—¶åŒºå±æ€§ï¼Œå¦åˆ™ä¹±ç </label></p>
<p><img src="https://img-blog.csdnimg.cn/5f6ad4958e8940e19977bdfbd74a6d56.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ç„¶åä¿®æ”¹è­¦æŠ¥é‚®ç®±é…ç½®</p>
<p><img src="https://img-blog.csdnimg.cn/fdce9d1b4aa744269bdfcd5706c83abc.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBARm9hbeeVquiMhA==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="4-è­¦æŠ¥é‚®ç®±é…ç½®"><a href="#4-è­¦æŠ¥é‚®ç®±é…ç½®" class="headerlink" title="4.è­¦æŠ¥é‚®ç®±é…ç½®"></a>4.è­¦æŠ¥é‚®ç®±é…ç½®</h3><p><img src="https://img-blog.csdnimg.cn/f59f8bc6828343909ba1c178b8ed6e72.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBARm9hbeeVquiMhA==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å»è‡ªå·±å¯¹åº”é‚®ç®±çš„è®¾ç½®é‡Œé¢æ‰¾åˆ°smtpå¹¶å¼€å¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ³¨æ„ï¼šspring.mail.passwordçš„å¯†ç æ˜¯QQé‚®ç®±å¼€å¯SMTPçš„æˆæƒç è€ŒéQQå¯†ç </span><br></pre></td></tr></table></figure>

<p><label style="color:#843900">è¿™é‡Œéœ€è¦æ³¨æ„ä¸åŒé‚®ç®±æœ‰ä¸åŒçš„æ”¶å‘ä»¶host</label></p>
<p>æ¯”å¦‚æ–°æµª</p>
<p>å‘ä»¶:POP3æœåŠ¡å™¨ä¸ºï¼špop3.sina.com.cn<br>æ”¶ä»¶:SMTPæœåŠ¡å™¨ä¸ºï¼šsmtp.sina.com.cn</p>
<p>qq</p>
<p>å‘ä»¶:POP3æœåŠ¡å™¨ä¸ºï¼špop.qq.com<br>æ”¶ä»¶:SMTPæœåŠ¡å™¨ä¸ºï¼šsmtp.qq.com</p>
<p>æ³¨æ„ ä¸èƒ½è‡ªå·±é‚®ç®±å‘è‡ªå·±é‚®ç®±ï¼Œå¦åˆ™æ”¶ä¸åˆ°</p>
<p><img src="https://img-blog.csdnimg.cn/e0947d401d0f4f0d8bb6a64063f3d866.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBARm9hbeeVquiMhA==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ä¸Šé¢å°±æ˜¯æ”¶ä»¶çš„å†…å®¹</p>
<h3 id="5-bootæ•´åˆxxljob"><a href="#5-bootæ•´åˆxxljob" class="headerlink" title="5.bootæ•´åˆxxljob"></a>5.bootæ•´åˆxxljob</h3><p>å¼•å…¥ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xuxueli<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>xxl-job-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>é…ç½®æ–‡ä»¶æ•´åˆ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xxl.job.core.executor.impl.XxlJobSpringExecutor;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">xxlConfig</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Logger logger = LoggerFactory.getLogger(xxlConfig.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.admin.addresses&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String adminAddresses;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.accessToken&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String accessToken;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.executor.appname&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String appname;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.executor.address&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.executor.ip&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String ip;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.executor.port&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> port;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.executor.logpath&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String logPath;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;xxl.job.executor.logretentiondays&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> logRetentionDays;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> XxlJobSpringExecutor <span class="title">xxlJobExecutor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; xxl-job config init.&quot;</span>);</span><br><span class="line">        XxlJobSpringExecutor xxlJobSpringExecutor = <span class="keyword">new</span> XxlJobSpringExecutor();</span><br><span class="line">        xxlJobSpringExecutor.setAdminAddresses(adminAddresses);</span><br><span class="line">        xxlJobSpringExecutor.setAppname(appname);</span><br><span class="line">        xxlJobSpringExecutor.setAddress(address);</span><br><span class="line">        xxlJobSpringExecutor.setIp(ip);</span><br><span class="line">        xxlJobSpringExecutor.setPort(port);</span><br><span class="line">        xxlJobSpringExecutor.setAccessToken(accessToken);</span><br><span class="line">        xxlJobSpringExecutor.setLogPath(logPath);</span><br><span class="line">        xxlJobSpringExecutor.setLogRetentionDays(logRetentionDays);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> xxlJobSpringExecutor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>application.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨ç«¯å£å’Œè®¿é—®è·¯å¾„</span></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">8089</span></span><br><span class="line"><span class="meta">server.servlet.context-path</span>=<span class="string">/todo</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># è°ƒåº¦ä¸­å¿ƒï¼ˆxxl-job-adminï¼‰çš„éƒ¨ç½²åœ°å€ï¼Œå¦‚è°ƒåº¦ä¸­å¿ƒé›†ç¾¤éƒ¨ç½²å­˜åœ¨å¤šä¸ªåœ°å€åˆ™ç”¨é€—å·åˆ†éš”ã€‚æ‰§è¡Œå™¨å°†ä¼šä½¿ç”¨è¯¥åœ°å€è¿›è¡Œ&quot;æ‰§è¡Œå™¨å¿ƒè·³æ³¨å†Œ&quot;å’Œ&quot;ä»»åŠ¡ç»“æœå›è°ƒ&quot;ï¼›</span></span><br><span class="line"><span class="comment"># ä¸ºç©ºåˆ™å…³é—­è‡ªåŠ¨æ³¨å†Œï¼›åˆ™éœ€è¦æ‰‹åŠ¨æ³¨å†Œ</span></span><br><span class="line"><span class="meta">xxl.job.admin.addresses</span>=<span class="string">http://127.0.0.1:8080/xxl-job-admin</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨é€šè®¯TOKEN [é€‰å¡«]ï¼šéç©ºæ—¶å¯ç”¨ï¼›</span></span><br><span class="line"><span class="meta">xxl.job.accessToken</span>=<span class="string"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨AppName [é€‰å¡«]ï¼šæ‰§è¡Œå™¨å¿ƒè·³æ³¨å†Œåˆ†ç»„ä¾æ®ï¼›ä¸ºç©ºåˆ™å…³é—­è‡ªåŠ¨æ³¨å†Œ</span></span><br><span class="line"><span class="meta">xxl.job.executor.appname</span>=<span class="string">job-to-do</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨æ³¨å†Œ [é€‰å¡«]ï¼šä¼˜å…ˆä½¿ç”¨è¯¥é…ç½®ä½œä¸ºæ³¨å†Œåœ°å€ï¼Œä¸ºç©ºæ—¶ä½¿ç”¨å†…åµŒæœåŠ¡ â€IP:PORTâ€œ ä½œä¸ºæ³¨å†Œåœ°å€ã€‚ä»è€Œæ›´çµæ´»çš„æ”¯æŒå®¹å™¨ç±»å‹æ‰§è¡Œå™¨åŠ¨æ€IPå’ŒåŠ¨æ€æ˜ å°„ç«¯å£é—®é¢˜ã€‚</span></span><br><span class="line"><span class="meta">xxl.job.executor.address</span>=<span class="string"></span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨IP [é€‰å¡«]ï¼šé»˜è®¤ä¸ºç©ºè¡¨ç¤ºè‡ªåŠ¨è·å–IPï¼Œå¤šç½‘å¡æ—¶å¯æ‰‹åŠ¨è®¾ç½®æŒ‡å®šIPï¼Œè¯¥IPä¸ä¼šç»‘å®šHostä»…ä½œä¸ºé€šè®¯å®ç”¨ï¼›åœ°å€ä¿¡æ¯ç”¨äº &quot;æ‰§è¡Œå™¨æ³¨å†Œ&quot; å’Œ &quot;è°ƒåº¦ä¸­å¿ƒè¯·æ±‚å¹¶è§¦å‘ä»»åŠ¡&quot;ï¼›</span></span><br><span class="line"><span class="meta">xxl.job.executor.ip</span>=<span class="string"></span></span><br><span class="line"><span class="meta">xxl.job.executor.port</span>=<span class="string">9998</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨è¿è¡Œæ—¥å¿—æ–‡ä»¶å­˜å‚¨ç£ç›˜è·¯å¾„ [é€‰å¡«] ï¼šéœ€è¦å¯¹è¯¥è·¯å¾„æ‹¥æœ‰è¯»å†™æƒé™ï¼›ä¸ºç©ºåˆ™ä½¿ç”¨é»˜è®¤è·¯å¾„ï¼›</span></span><br><span class="line"><span class="meta">xxl.job.executor.logpath</span>=<span class="string">/data/applogs/xxl-job/jobhandler</span></span><br><span class="line"><span class="comment">### æ‰§è¡Œå™¨æ—¥å¿—æ–‡ä»¶ä¿å­˜å¤©æ•° [é€‰å¡«] ï¼š è¿‡æœŸæ—¥å¿—è‡ªåŠ¨æ¸…ç†, é™åˆ¶å€¼å¤§äºç­‰äº3æ—¶ç”Ÿæ•ˆ; å¦åˆ™, å¦‚-1, å…³é—­è‡ªåŠ¨æ¸…ç†åŠŸèƒ½ï¼›</span></span><br><span class="line"><span class="meta">xxl.job.executor.logretentiondays</span>=<span class="string">30</span></span><br></pre></td></tr></table></figure>

<h3 id="6-å®šæ—¶ä»»åŠ¡çš„åˆ›å»ºæ–¹å¼"><a href="#6-å®šæ—¶ä»»åŠ¡çš„åˆ›å»ºæ–¹å¼" class="headerlink" title="6.å®šæ—¶ä»»åŠ¡çš„åˆ›å»ºæ–¹å¼"></a>6.å®šæ—¶ä»»åŠ¡çš„åˆ›å»ºæ–¹å¼</h3><p><img src="https://img-blog.csdnimg.cn/20210107153914491.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3ajc3NjE5OTg0NQ==,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>@XxlJobæ³¨è§£æ˜¯æ–°ç‰ˆæœ¬æä¾›çš„æ–¹å¼ï¼Œä¸éœ€è¦ç»§æ‰¿</p>
<p>æ—§ç‰ˆæ–¹å¼æ˜¯ç»§æ‰¿IJobHanderç„¶åé‡å†™executeæ–¹æ³•</p>
<h3 id="7-ç•Œé¢ä»‹ç»"><a href="#7-ç•Œé¢ä»‹ç»" class="headerlink" title="7.ç•Œé¢ä»‹ç»"></a>7.ç•Œé¢ä»‹ç»</h3><p><img src="https://img-blog.csdnimg.cn/1d7d97d8e07041649fe41609182ff877.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBARm9hbeeVquiMhA==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/64509e90b93641e38373b498c1f68392.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBARm9hbeeVquiMhA==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><label style="color:#843900"> æ³¨æ„  å½“åˆ é™¤ä»»åŠ¡æ—¶ï¼Œä»»åŠ¡æ—¥å¿—ä¹Ÿä¼šè·Ÿç€åˆ é™¤ </label></p>
]]></content>
      <tags>
        <tag>java</tag>
        <tag>ä¸­é—´ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®€å•åæ§½ä¸€ä¸‹xml</title>
    <url>/2022/01/08/%E6%96%B0%E6%96%87%E7%AB%A0/</url>
    <content><![CDATA[<blockquote>
<p>æè¿°</p>
</blockquote>
<p>è¿‘æœŸä¸ä¾›åº”å•†å¯¹æ¥çš„æ—¶å€™ï¼Œå¯¹æ–¹çš„æ¥å£è¿˜æ˜¯æ¯”è¾ƒç¨³å®šçš„xmlæ¥å£ï¼Œä¸å½“ä¸‹æµè¡Œçš„jsonçš„ä¾¿æ·æ€§ç›¸æ¯”è¿˜æ˜¯ä¸å¤ªæ–¹ä¾¿ï¼Œä¸­é—´æˆ‘ä¹Ÿä½¿ç”¨äº†å‡ ç§å·¥å…·ç±»ï¼Œå¾ˆéš¾æœ‰å®Œå…¨é€‚é…çš„ï¼Œä¸‹æ–‡æˆ‘å°†è®²è¿°æˆ‘è§£æxmlçš„å†ç¨‹</p>
<blockquote>
<p>åˆæ¬¡æ¥è§¦</p>
</blockquote>
<p>ç¬¬ä¸€æ¬¡æ¥è§¦xmlæ¥å£æ˜¯åœ¨å¯¹æ¥ç‰©æµæ¸ é“å•†çš„æ—¶å€™ï¼Œå½“æ—¶ä»–ä»¬ä½¿ç”¨çš„å¯¹æ¥æ–¹å¼ä¸ºsoapæ ¼å¼ï¼Œåˆšæ¥è§¦è§£æèµ·æ¥ç®€ç›´è¦äº†è€å‘½ï¼Œä»€ä¹ˆæ˜¯soapå‘¢ï¼Ÿæ˜¯åŸºäºxmlçš„ç®€æ˜“åè®®ï¼Œå¸¸ç”¨äºwebservieï¼Œå®ƒæœ‰è‡ªå·±çš„ä¸€å¥—ç¼–ç è§„åˆ™ï¼Œå¦‚ä¸‹</p>
<p><img src="https://gitee.com/foam077/images/raw/master/img/20161106222250124.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è¿™ç§è¯·æ±‚ç½‘ä¸Šè§£ææ–¹å¼å°±å¾ˆå°‘ï¼Œå¾ˆå¤šåªæœ‰è§£ææ²¡æœ‰æ„é€ ï¼Œæ–‡æœ¬ä¹Ÿä¸å¤ªå…¨ï¼Œç›®å‰è§è¿‡å†™çš„æ¯”è¾ƒå¥½çš„è§£æå¦‚ä¸‹ï¼š<a href="https://blog.csdn.net/RUANJIAOXIAOZI/article/details/90770534">https://blog.csdn.net/RUANJIAOXIAOZI/article/details/90770534</a></p>
<p>å½“ç„¶è¿˜æœ‰xsdæ¨¡å¼çš„xml<br><img src="https://img-blog.csdnimg.cn/03da286e53754f9cba71647d703c0c3b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBARm9hbeeVquiMhA==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å› ä¸ºè¿™æ¬¡è®²çš„æ˜¯xmlè§£æï¼Œä¸Šé¢åªæ˜¯ä¸¾ä¸ªæ —å­ï¼Œè®©ä½ ä»¬ä½“ä¼šä¸€ä¸‹xmlçš„å˜ç§æœ‰å¤šéš¾ğŸ˜­</p>
<p>è¿™ç§æ¥å£ä¸è¿‡åˆ†çš„è¯´ï¼Œè‡³å°‘åå¹´å¾€ä¸Šçš„æ¶æ„äº†</p>
<blockquote>
<p>ä½¿ç”¨dom4j/jsoupè§£æ</p>
</blockquote>
<p>dom4jåº”è¯¥æ˜¯æœ€ç»å…¸è§£æxmlçš„apiäº†ï¼Œæ€§èƒ½ä¼˜å¼‚ï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚ä½†æ˜¯ä½¿ç”¨èµ·æ¥è¿˜æ˜¯ç•¥ä¸ºéº»çƒ¦ï¼Œæœ‰ç‚¹åƒç”¨javaçš„jsoupå»çˆ¬å–ç½‘é¡µï¼Œéœ€è¦ä¸€ä¸ªä¸€ä¸ªèŠ‚ç‚¹çš„å»æ‰¾</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Dom4jè·å–xmlçš„ä¸‰ç§æ–¹å¼</span><br><span class="line"><span class="number">1.</span>è¯»å–xmlæ–‡ä»¶ï¼Œè·å¾—documentå¯¹è±¡</span><br><span class="line">    SAXReader reader = <span class="keyword">new</span> SAXReader();</span><br><span class="line">    Document document = reader.read(<span class="keyword">new</span> File(<span class="string">&quot;test.xml&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>ç›´æ¥è§£æxmlå½¢å¼çš„æ–‡æœ¬</span><br><span class="line">    String text = <span class="string">&quot;&lt;tag&gt;&lt;/tag&gt;&quot;</span>;</span><br><span class="line">	Document document = DocumentHelper.parseText(text);</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>ä¸»åŠ¨åˆ›å»ºdocumentå¯¹è±¡</span><br><span class="line">    Document document = DocumentHelper.createDocument();</span><br><span class="line">	Element root = document.addElement(<span class="string">&quot;tag&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">jsoupè§£æhtmlæ–¹å¼</span><br><span class="line">Document document = Jsoup.parse(html);</span><br><span class="line">Element postList = document.getElementById(<span class="string">&quot;post_list&quot;</span>);</span><br><span class="line">Elements titleEle = postItem.select(<span class="string">&quot;.post_item_body a[class=&#x27;titlelnk&#x27;]&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šè¿™ç§è§£ææ–¹å¼ï¼Œå±äºæ‰€è§å³æ‰€å¾—éšæ—¶å¯å–ï¼Œä½†æ˜¯å¾€å¾€å¯è¯»æ€§æ¯”è¾ƒå·®ï¼Œå¦‚å›¾<br><img src="https://img-blog.csdnimg.cn/eabec9e14b4b4fa3b1ffb5459f8c3ca9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBARm9hbeeVquiMhA==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å½“ç„¶å¦‚æœä½ ä¸å«Œéº»çƒ¦ï¼Œjsoupä¹Ÿå¯ä»¥è§£æxmlçš„ğŸ˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JosupTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1. è·å–Documentå¯¹è±¡ï¼Œæ ¹æ®xmlæ–‡æ¡£è·å–</span></span><br><span class="line">        <span class="comment">//2. è·å–user.xmlçš„path</span></span><br><span class="line">        String path = Objects.requireNonNull(JosupTest.class.getClassLoader().getResource(<span class="string">&quot;User.xml&quot;</span>)).getPath();</span><br><span class="line">        <span class="comment">//3. è§£æxmlæ–‡æ¡£ï¼ŒåŠ è½½æ–‡æ¡£è¿›å†…å­˜ï¼Œè·å–domæ ‘-----&gt;Document</span></span><br><span class="line">        Document document = Jsoup.parse(<span class="keyword">new</span> File(path),<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">//4. è·å–å…ƒç´ å¯¹è±¡Elements(ç±»å‹ä¸ºArrayList)</span></span><br><span class="line">        Elements elements = document.getElementsByTag(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="comment">//5. æµ‹è¯•è·å–å…ƒç´ çš„ä¸ªæ•°æ˜¯å¦ç¬¦åˆï¼Œxmlæ–‡ä»¶ä¸­çš„ä¸ªæ•°</span></span><br><span class="line">        System.out.println(elements.size());</span><br><span class="line">        <span class="comment">//5. æµ‹è¯•è·å–ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        Element element = elements.get(<span class="number">0</span>);</span><br><span class="line">        <span class="comment">//5. æµ‹è¯•è·å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ–‡æœ¬å†…å®¹</span></span><br><span class="line">        String name = element.text();</span><br><span class="line">        <span class="comment">//5. æµ‹è¯•è·å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„åå­—æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">        System.out.println(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åˆ©ç”¨fastjsonè¿›è¡Œè½¬æ¢</p>
</blockquote>
<p>fastjsonå’Œgsonè¿™ä¸¤ç§è§£ææ–¹å¼æ˜¯æˆ‘ä½¿ç”¨æœ€å¤šçš„ä¸¤ç§è§£ææ–¹å¼</p>
<p>gsonï¼šå¿«é€Ÿï¼Œé«˜æ•ˆï¼Œä»£ç é‡å°‘ï¼Œé¢å‘å¯¹è±¡ï¼Œä½†æ˜¯ç›¸å¯¹fastjsonå’Œjackjsonï¼Œå®ƒçš„å„æ–¹é¢æ€§èƒ½éƒ½è¢«ç¢¾å‹</p>
<p>fastjsonï¼šæ€§èƒ½æœ€é«˜ï¼Œæ”¯æŒå¤šç§ç±»å‹è§£æï¼Œç”±äºfastjsonå¤ªä¾§é‡æ€§èƒ½ï¼Œå¯¹äºéƒ¨åˆ†é«˜çº§ç‰¹æ€§æ”¯æŒä¸å¤Ÿï¼Œæœ‰ä¸€éƒ¨åˆ†è‡ªå®šä¹‰ç‰¹æ€§å®Œå…¨åç¦»äº†jsonå’Œjsè§„èŒƒï¼Œå¯èƒ½å¯¼è‡´ä¸å…¶ä»–æ¡†æ¶ä¸å…¼å®¹çš„bugï¼Œå¹¶ä¸”æ–‡æ¡£ç¼ºå¤±è¾ƒå¤šï¼Œè€Œä¸”ä»£ç ç¼ºå°‘æ³¨é‡Šè¾ƒä¸ºæ™¦æ¶©ï¼Œè¿‘å‡ å¹´ä¹Ÿå‡ºç°è¿‡ä¸€äº›é«˜å±æ¼æ´</p>
<p>å¦‚æœè¦ä½¿ç”¨fastjsonè§£æxmlä¸ºjsonæ ¼å¼å°±éœ€è¦ä½¿ç”¨å·¥å…·ç±»çš„å½¢å¼è¿›è¡Œè½¬æ¢</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.service.zl.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.dom4j.Attribute;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Document;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.DocumentException;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.DocumentHelper;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Element;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONArray;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * xmlå·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> sleep</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2016-09-13</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XmlTools</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * String è½¬ org.dom4j.Document</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> xml</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> DocumentException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Document <span class="title">strToDocument</span><span class="params">(String xml)</span> <span class="keyword">throws</span> DocumentException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> DocumentHelper.parseText(xml);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * org.dom4j.Document è½¬  com.alibaba.fastjson.JSONObject</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> xml</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> DocumentException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> JSONObject <span class="title">documentToJSONObject</span><span class="params">(String xml)</span> <span class="keyword">throws</span> DocumentException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> elementToJSONObject(strToDocument(xml).getRootElement());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * org.dom4j.Element è½¬  com.alibaba.fastjson.JSONObject</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> node</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> JSONObject <span class="title">elementToJSONObject</span><span class="params">(Element node)</span> </span>&#123;</span><br><span class="line">        JSONObject result = <span class="keyword">new</span> JSONObject();</span><br><span class="line">        <span class="comment">// å½“å‰èŠ‚ç‚¹çš„åç§°ã€æ–‡æœ¬å†…å®¹å’Œå±æ€§</span></span><br><span class="line">        List&lt;Attribute&gt; listAttr = node.attributes();<span class="comment">// å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§çš„list</span></span><br><span class="line">        <span class="keyword">for</span> (Attribute attr : listAttr) &#123;<span class="comment">// éå†å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§</span></span><br><span class="line">            result.put(attr.getName(), attr.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// é€’å½’éå†å½“å‰èŠ‚ç‚¹æ‰€æœ‰çš„å­èŠ‚ç‚¹</span></span><br><span class="line">        List&lt;Element&gt; listElement = node.elements();<span class="comment">// æ‰€æœ‰ä¸€çº§å­èŠ‚ç‚¹çš„list</span></span><br><span class="line">        <span class="keyword">if</span> (!listElement.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Element e : listElement) &#123;<span class="comment">// éå†æ‰€æœ‰ä¸€çº§å­èŠ‚ç‚¹</span></span><br><span class="line">                <span class="keyword">if</span> (e.attributes().isEmpty() &amp;&amp; e.elements().isEmpty()) <span class="comment">// åˆ¤æ–­ä¸€çº§èŠ‚ç‚¹æ˜¯å¦æœ‰å±æ€§å’Œå­èŠ‚ç‚¹</span></span><br><span class="line">                    result.put(e.getName(), e.getTextTrim());<span class="comment">// æ²’æœ‰åˆ™å°†å½“å‰èŠ‚ç‚¹ä½œä¸ºä¸Šçº§èŠ‚ç‚¹çš„å±æ€§å¯¹å¾…</span></span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (!result.containsKey(e.getName())) <span class="comment">// åˆ¤æ–­çˆ¶èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨è¯¥ä¸€çº§èŠ‚ç‚¹åç§°çš„å±æ€§</span></span><br><span class="line">                        result.put(e.getName(), <span class="keyword">new</span> JSONArray());<span class="comment">// æ²¡æœ‰åˆ™åˆ›å»º</span></span><br><span class="line">                    ((JSONArray) result.get(e.getName())).add(elementToJSONObject(e));<span class="comment">// å°†è¯¥ä¸€çº§èŠ‚ç‚¹æ”¾å…¥è¯¥èŠ‚ç‚¹åç§°çš„å±æ€§å¯¹åº”çš„å€¼ä¸­</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢å·¥å…·ç±»å¯ä»¥ç›´æ¥æŠŠxmlè½¬ä¸ºjsonæ ¼å¼ï¼Œéå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯å±€é™æ€§å¤ªå¤§   åªèƒ½å•å‘è§£æï¼Œæ‰€ä»¥æœ€å¥½çš„æ–¹å¼è¿˜æ˜¯å»ºç«‹å®ä½“ç±»çš„æ–¹å¼</p>
<blockquote>
<p>jaxbå’Œjackson</p>
</blockquote>
<p>jaxbï¼šå®ƒæ˜¯ä¸€ä¸ªä¸šç•Œçš„æ ‡å‡†ï¼Œæ˜¯ä¸€é¡¹å¯ä»¥æ ¹æ®xmlç”Ÿæˆjavaç±»çš„æŠ€æœ¯ã€‚ä¹Ÿå¯ä»¥æ ¹æ®xmlå®ä¾‹æ–‡æ¡£åå‘ç”Ÿæˆjavaå¯¹è±¡æ ‘çš„æ–¹æ³•ï¼Œä¸saxå’Œdomä¸åŒï¼Œä¸éœ€è¦äº†è§£xmlè§£ææŠ€æœ¯ï¼Œå°±ä¸¤ç§æ“ä½œ<code>javaå¯¹è±¡è½¬xml</code>å’Œ<code>xmlè½¬javaå¯¹è±¡</code></p>
<p>jacksonï¼šå®ƒæ€§èƒ½ä»‹äºfastjsonå’Œgsonä¹‹é—´ï¼Œä½†æ˜¯å®ƒæ˜¯ç›®å‰æœ€æµè¡Œçš„apiï¼Œè§„èŒƒæ€§é«˜ï¼Œæ¼æ´ä¹Ÿæ²¡æœ‰fastjsonå¤šï¼Œè¿˜æ”¯æŒjsonå’Œxmlè½¬æ¢ï¼Œç›®å‰å¸‚åœºä¸Šæœ€å¥½ç”¨çš„apiä¹‹ä¸€</p>
<p>å…ˆæ¥çœ‹çœ‹jaxbçš„è§£æxmlæ–¹å¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@XmlRootElement(name = &quot;ServicesError&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TaoBaoBaseRequest</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String errorCode;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String errorMessage;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@XmlElement(name = &quot;ErrorCode&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getErrorCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> errorCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setErrorCode</span><span class="params">(String errorCode)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.errorCode = errorCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@XmlElement(name = &quot;ErrorMessage&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getErrorMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> errorMessage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setErrorMessage</span><span class="params">(String errorMessage)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.errorMessage = errorMessage;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>jaxbçš„è§£æå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="https://blog.csdn.net/wn084/article/details/80853587">https://blog.csdn.net/wn084/article/details/80853587</a></p>
<p>ä»¥ä¸‹æ˜¯jackjsonçš„è§£æ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.model.taobao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonInclude;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.MapperFeature;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.dataformat.xml.XmlMapper;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.annotation.XmlRootElement;</span><br><span class="line"><span class="keyword">import</span> javax.xml.stream.XMLStreamException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ClassName: test &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> * Description: &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> * date: 2022/1/30 9:08&lt;br/&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Administrator&lt;br /&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, XMLStreamException </span>&#123;</span><br><span class="line">        String xml = <span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot; standalone=\&quot;no\&quot; ?&gt;&lt;DataList Airlines=\&quot;ALL\&quot; Dpt=\&quot;KMG\&quot; Arr=\&quot;JJN\&quot; Date=\&quot;20220301\&quot; Carrier=\&quot;SC\&quot; Cabin = \&quot;U\&quot; Code=\&quot;SC9260\&quot;&gt;&lt;/DataList&gt;&quot;</span>;</span><br><span class="line">        DataList dataList1 = xmlToObject(xml, DataList.class);</span><br><span class="line">        System.out.println(JSON.toJSONString(dataList1));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">objectToXml</span><span class="params">(Object object)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        XmlMapper xmlMapper= <span class="keyword">new</span> XmlMapper();</span><br><span class="line">        xmlMapper.setDefaultUseWrapper(<span class="keyword">false</span>);</span><br><span class="line">        <span class="comment">/* å­—æ®µä¸ºnullï¼Œè‡ªåŠ¨å¿½ç•¥ï¼Œä¸å†åºåˆ—åŒ– */</span></span><br><span class="line">        xmlMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);</span><br><span class="line">        <span class="comment">/* è®¾ç½®è½¬æ¢æ¨¡å¼ */</span></span><br><span class="line">        xmlMapper.enable(MapperFeature.USE_STD_BEAN_NAMING);</span><br><span class="line">        String resultXml = xmlMapper.writeValueAsString(object);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> resultXml;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">xmlToObject</span><span class="params">(String xml,Class&lt;T&gt; clazz)</span> <span class="keyword">throws</span> IOException, XMLStreamException </span>&#123;</span><br><span class="line">        XmlMapper xmlMapper= <span class="keyword">new</span> XmlMapper();</span><br><span class="line">        xmlMapper.setDefaultUseWrapper(<span class="keyword">false</span>);</span><br><span class="line">        <span class="comment">/* å­—æ®µä¸ºnullï¼Œè‡ªåŠ¨å¿½ç•¥ï¼Œä¸å†åºåˆ—åŒ– */</span></span><br><span class="line">        xmlMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);</span><br><span class="line">        <span class="comment">/* è®¾ç½®è½¬æ¢æ¨¡å¼ */</span></span><br><span class="line">        xmlMapper.enable(MapperFeature.USE_STD_BEAN_NAMING);</span><br><span class="line">        <span class="keyword">return</span> xmlMapper.readValue(xml, clazz);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@JacksonXmlRootElement</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataList</span></span>&#123;</span><br><span class="line">    <span class="meta">@JacksonXmlProperty(isAttribute = true)</span></span><br><span class="line">    <span class="keyword">private</span> String Airlines;</span><br><span class="line">    <span class="meta">@JacksonXmlProperty(isAttribute = true)</span></span><br><span class="line">    <span class="keyword">private</span> String Dpt;</span><br><span class="line">    <span class="meta">@JacksonXmlProperty(isAttribute = true)</span></span><br><span class="line">    <span class="keyword">private</span> String Arr;</span><br><span class="line">    <span class="meta">@JacksonXmlProperty(isAttribute = true)</span></span><br><span class="line">    <span class="keyword">private</span> String Date;</span><br><span class="line">    <span class="meta">@JacksonXmlProperty(isAttribute = true)</span></span><br><span class="line">    <span class="keyword">private</span> String Carrier;</span><br><span class="line">    <span class="meta">@JacksonXmlProperty(isAttribute = true)</span></span><br><span class="line">    <span class="keyword">private</span> String Cabin;</span><br><span class="line">    <span class="meta">@JacksonXmlProperty(isAttribute = true)</span></span><br><span class="line">    <span class="keyword">private</span> String Code;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAirlines</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Airlines;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAirlines</span><span class="params">(String airlines)</span> </span>&#123;</span><br><span class="line">        Airlines = airlines;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDpt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Dpt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDpt</span><span class="params">(String dpt)</span> </span>&#123;</span><br><span class="line">        Dpt = dpt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getArr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Arr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setArr</span><span class="params">(String arr)</span> </span>&#123;</span><br><span class="line">        Arr = arr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Date;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDate</span><span class="params">(String date)</span> </span>&#123;</span><br><span class="line">        Date = date;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCarrier</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Carrier;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCarrier</span><span class="params">(String carrier)</span> </span>&#123;</span><br><span class="line">        Carrier = carrier;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCabin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Cabin;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCabin</span><span class="params">(String cabin)</span> </span>&#123;</span><br><span class="line">        Cabin = cabin;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCode</span><span class="params">(String code)</span> </span>&#123;</span><br><span class="line">        Code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DataList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é‡Œé¢å†™äº†ä¸€ä¸ªå·¥å…·ç±»ï¼š<code>objectToXml</code>å’Œ<code>xmlToObject</code>å¯ä»¥è½¬æ¢xmlå’Œå®ä½“ç±»<br>==æ³¨æ„è¸©å‘==</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">å‘ä¸€ï¼šå¤§å°å†™é—®é¢˜</span><br><span class="line"></span><br><span class="line"><span class="meta">@JacksonXmlProperty(localName = &quot;Apid&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer Apid;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Integer <span class="title">getApid</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.Apid</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æŠŠæ³¨è§£æ”¾åœ¨æˆå‘˜å˜é‡ä¸Šé¢ï¼Œä¼šè§£æå‡ºä¸¤ä¸ªapidå­—æ®µï¼Œä¸€ä¸ªæ˜¯&lt;Apid&gt;&lt;/Apid&gt;,å¦ä¸€ä¸ªæ˜¯&lt;apid&gt;&lt;apid&gt;</span><br><span class="line"></span><br><span class="line">è¿™æ˜¯å› ä¸ºJacksonçš„å¤„ç†æœºåˆ¶ä¼šè‡ªåŠ¨ä»å±æ€§æ–¹æ³•ä¸Šè·å–æˆå‘˜å˜é‡åï¼Œç„¶è€Œåœ¨javaä¸­ï¼Œè¦ä¹ˆä»¥é©¼å³°å‘½åï¼Œè¦ä¹ˆå‰ä¸¤ä¸ªå­—æ¯éƒ½å¤§å†™ï¼Œæ‰èƒ½ç”¨getæ–¹æ³•æ­£ç¡®åœ°è·å–å±æ€§ï¼Œæ‰€ä»¥ä½¿ç”¨getApidè·å–çš„æˆå‘˜åç§°å°±æ˜¯apidï¼Œè¢«jacksonè§£æäº†å‡ºæ¥ã€‚åˆå› ä¸ºæˆå‘˜å˜é‡ä¸Šä¹ŸåŠ äº†æ³¨è§£ï¼Œæ‰€ä»¥ä¹Ÿä¼šè¢«è§£æã€‚è¿™å°±é€ æˆäº†xmlæ–‡ä»¶ç”Ÿæˆäº†ä¸¤ä¸ªapidæ ‡ç­¾ã€‚æ­£ç¡®çš„åšæ³•æ˜¯æŠŠæ³¨è§£å†™åˆ°getæ–¹æ³•ä¸Šé¢</span><br><span class="line"></span><br><span class="line">æ­£ç¡®å†™æ³•ï¼š</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer Apid;</span><br><span class="line"></span><br><span class="line"><span class="meta">@JacksonXmlProperty(localName = &quot;Apid&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Integer <span class="title">getApid</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.Apid</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">å‘äºŒï¼šJacksonå°è£…listé—®é¢˜</span><br><span class="line"></span><br><span class="line">è¿™ä¸ªé—®é¢˜æ’æŸ¥çš„æ—¶å€™å¼‚å¸¸å›°éš¾â€¦â€¦å¼€å§‹ä»¥ä¸ºæ˜¯å°è£…çš„é—®é¢˜â€¦â€¦â€¦â€¦(åæ§½ä¸€ä¸‹ï¼Œè¿™ä¸ªå¤–åŒ…é¡¹ç›®ä½¿ç”¨å¤§é‡xmläº¤äº’ï¼Œä½†æ˜¯åˆç”¨ä¸äº†webserviceå°±å¾—æŒ‰ç…§å›ºå®šæ ¼å¼è§£æå°è£…xml.....æ”¹åŠ¨ä¹Ÿè´¼å›°éš¾ã€‚ã€‚ã€‚)â€¦â€¦æœ€åè¿˜æ˜¯ç¡®å®šäº†æ˜¯jacksonçš„é—®é¢˜</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> List&lt;Integer&gt; APID;</span><br><span class="line"></span><br><span class="line"><span class="meta">@JacksonXmlProperty(localName = &quot;APID&quot;)</span></span><br><span class="line"><span class="meta">@JacksonXmlElementWrapper(useWrapping = false)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">getAPID</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> APID;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">å¼€å§‹APIDè¿™ä¸ªlistä¸€ç›´è¢«åŒ…è£…äº†ä¸¤å±‚ï¼æ­£ç¡®ç»“æœåº”è¯¥æ˜¯&lt;APID&gt;<span class="number">111</span>&lt;/APID&gt;</span><br><span class="line"></span><br><span class="line">ä½†æ˜¯å¾—åˆ°çš„æ˜¯&lt;APID&gt;&lt;APID&gt;<span class="number">111</span>&lt;/APID&gt;&lt;/APID&gt;</span><br><span class="line"></span><br><span class="line">é—®é¢˜å‡ºåœ¨JacksonXmlElementWrapper</span><br><span class="line">å¦‚æœä¸æŒ‡å®šçš„è¯è¿™ä¸ªå€¼é»˜è®¤æ˜¯<span class="keyword">true</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ€»ç»“</p>
</blockquote>
<p>ç›®å‰æ„Ÿè§‰è§£æxmlçš„apiè¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œé’ˆå¯¹xmlçš„å„ç§å¥‡å¥‡æ€ªæ€ªçš„æ ¼å¼ï¼Œå¹¶ä¸æ˜¯éƒ½èƒ½å…¼å®¹åˆ°ï¼Œç›®å‰æ„Ÿè§‰æœ€å¥½ç”¨çš„è¿˜æ˜¯jackson+Lombokèƒ½æ¯”è¾ƒå¥½çš„å¿«é€Ÿè§£å†³é—®é¢˜ï¼Œå½“ç„¶è¦æ³¨æ„lombokçš„ä¾µå…¥æ€§å’Œjdkçš„ç‰ˆæœ¬é€‰æ‹©æœ€å¥½çš„æ–¹å¼å»è§£å†³ï¼Œæœ‰äº›æ–¹å¼è™½ç„¶ä¸æ–¹ä¾¿ï¼Œä½†æ˜¯å®ƒå°±æ˜¯èƒ½è§£å†³é—®é¢˜â€¦â€¦</p>
]]></content>
      <tags>
        <tag>java</tag>
        <tag>xml</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³å¾®ä¿¡å°ç¨‹åºé”®ç›˜ä¸Šç§»</title>
    <url>/2022/02/16/%E8%A7%A3%E5%86%B3%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%94%AE%E7%9B%98%E4%B8%8A%E7%A7%BB/</url>
    <content><![CDATA[<p>åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ²¡æœ‰å‡ºç°ä¸Šç§»çš„æƒ…å†µï¼Œä½†æ˜¯ä¸€åˆ°çœŸæœºè°ƒè¯•å°±å‡ºç°äº†ï¼ŒæŠŠé¡µé¢è®¾ç½®å›ºå®šå¸ƒå±€ä¹Ÿä¸ç®¡ç”¨<br><img src="https://img-blog.csdnimg.cn/ee256319d57f47979e4671c18a10ffc1.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBARm9hbeeVquiMhA==,size_14,color_FFFFFF,t_70,g_se,x_16" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç„¶åæŸ¥è¯¢å¾®ä¿¡å®˜æ–¹æ–‡æ¡£ï¼Œæ˜¯è¿™æ ·è§£é‡Šçš„<br>å°ç¨‹åºåœ¨inputæ¡†è¾“å…¥æ—¶ï¼Œé»˜è®¤ä¼šå¼€å¯è‡ªåŠ¨ä¸Šæ¨çš„åŠŸèƒ½ï¼Œä½†æ˜¯æœ‰çš„æ—¶å€™ä¼šå‡ºç°å¡é¡¿çš„ç°è±¡ï¼Œæƒ³å…³é—­è‡ªåŠ¨ä¸Šæ¨ï¼ŒæŠŠ<br><label style="color:#843900">adjust-positionè®¾ç½®ä¸ºfalse</label>å°±å¯ä»¥äº†</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-row</span>  <span class="attr">gutter</span>=<span class="string">&quot;20&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-col</span> <span class="attr">span</span>=<span class="string">&quot;24&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">          <span class="attr">left-icon</span>=<span class="string">&quot;eye-o&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">adjust-position</span>=<span class="string">&quot;false&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥å¯†ç &quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">name</span>=<span class="string">&quot;input&quot;</span>  <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>  <span class="attr">model:value</span>=<span class="string">&quot;&#123;&#123;password&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">       /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-col</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">van-row</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æŒ‰é“ç†åº”è¯¥å°±ä¸ä¼šå‡ºç°äº†ï¼Œç»“æœå°±æ˜¯ä¸ç”Ÿæ•ˆï¼Œç»è¿‡å‡ è½®çæåæ‰å‘ç°éœ€è¦åŠ <code>&#123;&#123;&#125;&#125;</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-row</span>  <span class="attr">gutter</span>=<span class="string">&quot;20&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">van-col</span> <span class="attr">span</span>=<span class="string">&quot;24&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">         <span class="attr">left-icon</span>=<span class="string">&quot;eye-o&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">adjust-position</span>=<span class="string">&quot;&#123;&#123; false &#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">         <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥å¯†ç &quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">name</span>=<span class="string">&quot;input&quot;</span>  <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>  <span class="attr">model:value</span>=<span class="string">&quot;&#123;&#123;password&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">van-col</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-row</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¯·å¤§å®¶è°¨æ…è¸©å‘</p>
]]></content>
      <tags>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
</search>
